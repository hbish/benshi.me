---
phase: 07-gallery-integration
plan: 01
type: execute
domain: astro
---

<objective>
Optimize image display with non-clickable images and improved lazy loading.

Purpose: Remove image click-through behavior and optimize above-fold image loading performance.
Output: Non-clickable photo grid with fetchpriority optimization for first images. </objective>

<execution_context> ~/.claude/get-shit-done/workflows/execute-phase.md ./summary.md
~/.claude/get-shit-done/references/checkpoints.md </execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-gallery-ui/06-01-SUMMARY.md
@src/pages/photos.astro
@tailwind.config.cjs

**Tech stack available:** Astro 5.1.3, native lazy loading **Established patterns:** CDN_BASE, lazy
loading with loading="lazy" **Constraining decisions:**

- Phase 4: CDN_BASE = 'https://cdn.hbish.com'
- Phase 6: 3-column responsive grid with tag filtering

**Issues being addressed:** None </context>

<tasks>

<task type="auto">
  <name>Task 1: Remove image links on photo grids</name>
  <files>src/pages/photos.astro, src/pages/photos/[slug].astro</files>
  <action>Remove the clickable link wrapper from photo grid items:
- Remove the `<a href={imageUrl} target="_blank" rel="noopener noreferrer">` wrapper
- Keep the `<img>` tag directly in the div
- Keep hover:opacity-90 effect on the img itself (users still get visual feedback)
- Apply to both /photos and /photos/[slug] pages

Images will now be non-clickable but still have hover visual feedback.</action> <verify>npm run
build succeeds, images no longer have click handlers</verify> <done>Photo grids display
non-clickable images with hover effect</done> </task>

<task type="auto">
  <name>Task 2: Optimize lazy loading with fetchpriority</name>
  <files>src/pages/photos.astro, src/pages/photos/[slug].astro</files>
  <action>Add fetchpriority optimization to images:
- First 6 images: `loading="eager"` and `fetchpriority="high"`
- Remaining images: `loading="lazy"` and `fetchpriority="auto"`
- Add `decoding="async"` to all images for better performance
- Use array index to determine fetchpriority: `{index < 6 ? 'eager' : 'lazy'}` and `{index < 6 ? 'high' : 'auto'}`

This ensures above-fold images load immediately while preserving lazy loading for the rest.</action>
<verify>npm run build succeeds, first 6 images have loading="eager" fetchpriority="high"</verify>
<done>First 6 images load eagerly, remaining images lazy load</done> </task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Non-clickable photo grids with optimized lazy loading</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Visit: http://localhost:4321/photos
    3. Verify: Images are not clickable (no hand cursor, no navigation)
    4. Verify: Hover still shows opacity effect
    5. Reload page and observe: First 6 images load immediately
    6. Scroll down: Additional images load as you scroll
    7. Visit: An album detail page
    8. Verify: Same behavior on album pages
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] Images are non-clickable (no link wrapper)
- [ ] First 6 images have loading="eager" and fetchpriority="high"
- [ ] Remaining images have loading="lazy"
- [ ] All images have decoding="async"
- [ ] Hover effect still works
- [ ] Both /photos and /photos/[slug] updated
</verification>

<success_criteria>

- Images no longer link to full-size URLs
- First 6 images load eagerly for perceived performance
- Remaining images lazy load
- Hover visual feedback preserved
- Phase 7 complete, v1.1 Photo Gallery milestone complete </success_criteria>

<output>
After completion, create `.planning/phases/07-gallery-integration/07-01-SUMMARY.md`:

# Phase 7 Plan 1: Gallery Integration Summary

**Photo gallery optimized with non-clickable images and improved lazy loading.**

## Accomplishments

- Removed image click-through behavior from photo grids
- Added fetchpriority optimization for first 6 images
- Lazy loading preserved for remaining images

## Files Created/Modified

- `src/pages/photos.astro` - Removed link wrapper, added fetchpriority
- `src/pages/photos/[slug].astro` - Same optimizations applied

## Decisions Made

- No lightbox (images are for viewing, not interaction)
- Non-clickable images (gallery is display-only)
- Fetchpriority threshold of 6 images for eager loading

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Phase 7 complete, v1.1 Photo Gallery milestone complete! </output>
