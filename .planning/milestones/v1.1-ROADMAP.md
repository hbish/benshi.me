# Milestone v1.1: Photo Gallery

**Status:** ✅ SHIPPED 2026-01-20 **Phases:** 4-7 **Total Plans:** 5

## Overview

Add a photo gallery with R2 object storage, custom domain CDN, masonry grid, collections, and
filtering.

## Phases

### Phase 4: Cloudflare R2 Storage Setup

**Goal**: Configure Cloudflare R2 for image storage with custom domain CDN and upload sample photos
**Depends on**: v1.0 milestone complete **Research**: Completed (R2 S3-compatible API)

Plans:

- [x] 04-01: R2 bucket, upload script, photos page

**Details:**

- Created R2 bucket `benshi-photos` for image storage
- Created upload script using AWS SDK v3
- Added photos content collection schema to Astro
- Configured custom domain `cdn.hbish.com` for R2 bucket
- Uploaded sample photos via wrangler CLI

### Phase 5: Gallery Data Structure

**Goal**: Create photo collections and metadata schema **Depends on**: Phase 4 **Research**:
Unlikely (internal data structures using existing Astro patterns)

Plans:

- [x] 05-01: Schema updates — featured field + collections
- [x] 05-02: Album pages — individual collection views

**Details:**

- Added `featured` boolean field to photo schema
- Created collections content type for album organization
- Built dynamic album detail pages using Astro's getStaticPaths
- Each album displays photos in a single-column grid

### Phase 6: Gallery UI Components

**Goal**: Build masonry grid, collections view, and filtering UI **Depends on**: Phase 5
**Research**: Unlikely (internal UI using existing Tailwind patterns)

Plans:

- [x] 06-01: Responsive grid and tag filtering

**Details:**

- Implemented 2-column responsive grid for album index
- Added tag-based filtering for albums
- Filter pills use collection tags from frontmatter
- Client-side filtering with URL parameter support

### Phase 7: Gallery Integration

**Goal**: Add polish and consistency to gallery pages with skeleton loading states and
blog-consistent layout **Depends on**: Phase 6 **Research**: Unlikely (internal polish using
existing patterns)

Plans:

- [x] 07-01: Skeleton loading, 2-column grid, centered layout

**Details:**

- Added skeleton loading state with fade-in animation for images
- Centered layout at 60% max-width for gallery pages
- Multiple fix iterations for layout refinements
- Consistent typography and spacing with blog patterns

---

## Milestone Summary

**Key Decisions:**

- Cloudflare R2 for hosting (zero egress fees)
- Custom domain cdn.hbish.com for CDN
- Masonry layout with 2 columns
- Collections/Albums for organization
- Filtering by collection tags (client-side for static builds)
- Lazy loading and responsive images

**Issues Resolved:**

- Tag filtering initially used photo tags, changed to collection tags
- Photo-to-collection matching via filename (underscore to hyphen normalization)
- Active tag highlighting fixed with proper URL parameter handling
- Multiple layout iterations for single-column album detail view
- Removed divider under "Back to Albums" link

**Additional Changes (Post-Milestone):**

- Added sparkle emoji (✨) on profile picture linking to /now
- Removed /now from navigation (accessible via emoji only)
- Merged talks content into work page
- Removed /talks page and navigation link
- Reordered navigation: /about, /work, /photos, /uses

**Technical Debt Incurred:**

- None identified

---

_For current project status, see .planning/ROADMAP.md_
