---
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import Sidebar from "../components/Sidebar.astro";
import Content from "../components/Content.astro";

export interface Props {
	title: string;
}

const { title } = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
<Header title={title || SITE_TITLE} description={SITE_DESCRIPTION} />
<body class="bg-theme text-theme transition-colors duration-300">
	<div class="waterfall"></div>
	<div class="container font-sans max-w-7xl mx-auto px-2 sm:px-6 lg:px-8 py-20">
		<div class="flex flex-col lg:flex-row">
			<div class="w-full lg:w-1/5 lg:order-first mx-8">
				<Sidebar />
			</div>
			<div class="w-full lg:w-4/5 mx-8">
				<div class="mb-8">
					<Content>
						<slot />
					</Content>
				</div>
				<div>
					<Footer />
				</div>
			</div>
		</div>
	</div>
	
	<!-- Site-wide JSON-LD Schema -->
	<script type="application/ld+json" set:html={JSON.stringify({
		"@context": "https://schema.org",
		"@type": "WebSite",
		"name": SITE_TITLE,
		"description": SITE_DESCRIPTION,
		"url": Astro.site?.toString(),
		"author": {
			"@type": "Person",
			"name": "Ben Shi",
			"url": Astro.site?.toString(),
			"sameAs": [
				"https://github.com/hbish",
				"https://x.com/hbish",
				"https://linkedin.com/in/hbish"
			]
		},
		"publisher": {
			"@type": "Organization",
			"name": SITE_TITLE,
			"url": Astro.site?.toString()
		},
		"potentialAction": {
			"@type": "SearchAction",
			"target": {
				"@type": "EntryPoint",
				"urlTemplate": `${Astro.site?.toString()}?q={search_term_string}`
			},
			"query-input": "required name=search_term_string"
		}
	})}>
	</script>
</body>
</html>